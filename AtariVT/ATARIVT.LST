0 BLANK=2000›2 GRAPHICS 0›10 REM INIT -------------------------›12 SETCOLOR 1,12,6:SETCOLOR 2,12,3›13 SETCOLOR 4,12,3›20 POKE 752,1:POKE 77,0›25 POKE 65,0:POKE 755,0›50 DIM F$(1280*2),F1$(40),E$(40)›52 DIM F2$(1280)›55 FLIP=0:ERRS=0›60 DL=PEEK(560)+PEEK(561)*256›70 SA=ADR(F$)›75 SH=INT(SA/256)›80 SL=INT(SA-SH*256)›90 GOSUB BLANK›170 POKE 77,120›180 GOTO 1000›200 TRAP 1000›202 POKE DL+4,SL:POKE DL+5,SH+FLIP*4›205 IF FLIP=0 THEN FLIP=1:GOTO 220›206 IF FLIP=1 THEN FLIP=0:GOTO 220›220 OPEN #1,4,0,"D2:FRAME.DAT"›235 TRAP 1100›240 FOR I=0 TO 22›250 INPUT #1,F1$›260 F$(1024*FLIP+I*40+1)=F1$(1,40)›270 NEXT I›280 CLOSE #1›290 POKE DL+4,SL:POKE DL+5,SH+FLIP*4›295 ERRS=0›300 GOTO 200›1000 REM FRAME NOT FOUND ------------›1010 E$="ATARIVT CONNECTING TO HOST"›1020 GOTO 1200›1100 REM BAD FRAME ------------------›1105 POKE 77,120›1106 CLOSE #1›1110 GOTO 200›1200 REM SWAP›1205 GOSUB BLANK›1208 POKE 88,SL:POKE 89,SH+FLIP*4›1210 POSITION 8,11›1220 PRINT E$›1230 POKE DL+4,SL:POKE DL+5,SH+FLIP*4›1235 FOR X=1 TO 200:NEXT X›1240 CLOSE #1›1250 GOTO 200›2000 REM BLANK THE PAGES›2010 F$=CHR$(0):F$(1280*2)=CHR$(0)›2030 F$(2)=F$›2035 FOR X=1 TO 100:NEXT X›2040 RETURN ›